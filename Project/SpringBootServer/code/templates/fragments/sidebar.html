<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<body>

<aside th:fragment="sidebarFragment(active)" class="w-72 bg-slate-800 text-white flex flex-col p-6">
    <div class="mb-8">
        <a th:href="@{/}" class="text-3xl font-bold text-white tracking-wide hover:text-blue-400 transition-colors">
            SMARTFARM
        </a>
    </div>

    <div class="mb-8 text-center">
        <p id="currentDate" class="text-sm text-slate-300"></p>
        <p id="currentTime" class="text-5xl font-extrabold tracking-tight mt-2"></p>
    </div>

    <nav class="space-y-2">
        <a th:href="@{/}" class="flex items-center gap-3 px-4 py-3 rounded-md"
           th:classappend="${active == 'dashboard'} ? 'bg-blue-700 text-white font-semibold' : 'text-slate-300 hover:bg-slate-700 hover:text-white transition-colors'"><span>대시보드</span></a>
        <a th:href="@{/module-status}" class="flex items-center gap-3 px-4 py-3 rounded-md"
           th:classappend="${active == 'module-status'} ? 'bg-blue-700 text-white font-semibold' : 'text-slate-300 hover:bg-slate-700 hover:text-white transition-colors'"><span>모듈 상태</span></a>
        <a th:href="@{/show_sensor_data}" class="flex items-center gap-3 px-4 py-3 rounded-md"
           th:classappend="${active == 'show-sensor-data'} ? 'bg-blue-700 text-white font-semibold' : 'text-slate-300 hover:bg-slate-700 hover:text-white transition-colors'"><span>센서 데이터 현황</span></a>
        <a th:href="@{/sensor_history}" class="flex items-center gap-3 px-4 py-3 rounded-md"
           th:classappend="${active == 'sensor-history'} ? 'bg-blue-700 text-white font-semibold' : 'text-slate-300 hover:bg-slate-700 hover:text-white transition-colors'"><span>전체 센서 기록</span></a>
        <a th:href="@{/settings}" class="flex items-center gap-3 px-4 py-3 rounded-md"
           th:classappend="${active == 'settings'} ? 'bg-blue-700 text-white font-semibold' : 'text-slate-300 hover:bg-slate-700 hover:text-white transition-colors'"><span>작물 셋팅</span></a>
        <a th:href="@{/show_settings}" class="flex items-center gap-3 px-4 py-3 rounded-md"
           th:classappend="${active == 'show-settings'} ? 'bg-blue-700 text-white font-semibold' : 'text-slate-300 hover:bg-slate-700 hover:text-white transition-colors'"><span>작물 셋팅값 조회</span></a>
        <a th:href="@{/camera}" class="flex items-center gap-3 px-4 py-3 rounded-md"
           th:classappend="${active == 'camera'} ? 'bg-blue-700 text-white font-semibold' : 'text-slate-300 hover:bg-slate-700 hover:text-white transition-colors'"><span>카메라</span></a>
        <a th:href="@{/chatbot}" class="flex items-center gap-3 px-4 py-3 rounded-md"
           th:classappend="${active == 'chatbot'} ? 'bg-blue-700 text-white font-semibold' : 'text-slate-300 hover:bg-slate-700 hover:text-white transition-colors'"><span>챗봇 서비스</span></a>
        <a th:href="@{/harvest}" class="flex items-center gap-3 px-4 py-3 rounded-md"
           th:classappend="${active == 'harvest'} ? 'bg-blue-700 text-white font-semibold' : 'text-slate-300 hover:bg-slate-700 hover:text-white transition-colors'"><span>수확 시기 예측</span></a>
    </nav>
</aside>

<script th:fragment="sidebarScript">
    function updateTime() {
        const now = new Date();
        const year = now.getFullYear();
        const month = String(now.getMonth() + 1).padStart(2, '0');
        const day = String(now.getDate()).padStart(2, '0');
        const week = ['일요일', '월요일', '화요일', '수요일', '목요일', '금요일', '토요일'][now.getDay()];
        const hours = String(now.getHours()).padStart(2, '0');
        const minutes = String(now.getMinutes()).padStart(2, '0');
        const ampm = hours >= 12 ? 'PM' : 'AM';
        const displayHours = hours % 12 || 12;

        const dateEl = document.getElementById('currentDate');
        const timeEl = document.getElementById('currentTime');
        if (dateEl) dateEl.innerText = `${year}년 ${month}월 ${day}일 ${week}`;
        if (timeEl) timeEl.innerText = `${displayHours}:${minutes} ${ampm}`;
    }

    if (typeof window.timeUpdater === 'undefined') {
        window.timeUpdater = setInterval(updateTime, 1000);
        updateTime();
    }
</script>

</body>

</html>